<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Next-generation web platform" />

    <!-- ìºì‹œ ë°©ì§€ (í•­ìƒ ìµœì‹  ë°ì´í„° ë¡œë“œ) -->
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="-1" />

    <!-- ë³´ì•ˆ ì„¤ì •: HTTPS ê°•ì œ -->
    <meta
      http-equiv="Content-Security-Policy"
      content="upgrade-insecure-requests"
    />

    <!-- Favicon & Web App Icons -->
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

    <!-- ê¸°ë³¸ íƒ€ì´í‹€ì€ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì—…ë°ì´íŠ¸ -->
    <title></title>

    <!-- í™˜ê²½ ë³€ìˆ˜ (env.js) ì¶”ê°€ -->
    <script src="%PUBLIC_URL%/env.js"></script>

    <!-- ì‚¬ì´íŠ¸ ê¸°ë³¸ ì–¸ì–´ ì„¤ì •, localStorage í™•ì¸ ë° íƒ€ì´í‹€ ì—…ë°ì´íŠ¸ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
      // `env.js`ì—ì„œ ê¸°ë³¸ ì–¸ì–´ ê°€ì ¸ì˜¤ê¸°
      const defaultLang = window.ENV?.DEFAULT_LANGUAGE || "ko";

      // localStorageì— `language` ê°’ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ì„¤ì •
      if (!localStorage.getItem("language")) {
        localStorage.setItem("language", defaultLang);
      }

      // ì €ì¥ëœ ì–¸ì–´ ë¶ˆëŸ¬ì˜¤ê¸°
      const savedLanguage = localStorage.getItem("language");
      window.siteLanguage = savedLanguage;

      // íƒ€ì´í‹€ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
      function updateTitle(lang) {
        document.title =
          lang === "ko"
            ? "ì¸í…Œë¦¬ì–´ê°€ ë‹¹ì‹ ì˜ ì† ì•ˆì— | ì¸ê·¸ë©"
            : "Your Space, Your Way | INGRAP";

        // ì–¸ì–´ ì—…ë°ì´íŠ¸ í›„ ì €ì¥
        window.siteLanguage = lang;
        localStorage.setItem("language", lang);
      }

      updateTitle(window.siteLanguage);

      // ğŸ“Œ `localStorage` ë³€ê²½ì„ ê°ì§€í•˜ëŠ” ì´ë²¤íŠ¸ ì¶”ê°€
      window.addEventListener("storage", (event) => {
        if (event.key === "language") {
          console.log("ğŸ”„ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë³€ê²½ ê°ì§€! ìƒˆ ê°’:", event.newValue);
          updateTitle(event.newValue);
        }
      });
    </script>
  </head>
  <body>
    <div id="root" style="height: 100%"></div>

    <!-- ì–¸ì–´ ë³€ê²½ ë²„íŠ¼ì€ ë‹¤ë¥¸ í˜ì´ì§€ì—ì„œ êµ¬í˜„ ì˜ˆì • -->

    <!-- Google Analytics (í™˜ê²½ë³€ìˆ˜ ì‚¬ìš© ê°€ëŠ¥) -->
    <script>
      if (window.ENV && window.ENV.GA_TRACKING_ID) {
        var script = document.createElement("script");
        script.async = true;
        script.src =
          "https://www.googletagmanager.com/gtag/js?id=" +
          window.ENV.GA_TRACKING_ID;
        document.head.appendChild(script);
        window.dataLayer = window.dataLayer || [];
        function gtag() {
          dataLayer.push(arguments);
        }
        gtag("js", new Date());
        gtag("config", window.ENV.GA_TRACKING_ID);
      }
    </script>
  </body>
</html>
